import multiprocessing as mp
import sys, os
import subprocess

def Bash_cmd(pop):
    #print statement to keep track of where you are
    print('Working on Pop : '+str(pop))
    #put your bash command below
    subprocess.call('while read chr pos rsid; do echo $chr $rsid; zgrep -w $pos \
    /Volumes/gravel/luke_projects/1000Genomes/Format/CHR${{chr}}.Format_{0}.csv.gz \
    >> /Users/luke/Documents/QualityPaper/sig/{0}_Format_sig.csv; done \
    < /Users/luke/Documents/QualityPaper/Significant6SNPs_adjusted_published.Chr.Pos.rsID.txt'.format(pop), shell=True)

if __name__ == '__main__':
  with open('/Users/luke/genomes/genomes/PopNames/NamePop.txt') as f:
      Pops = f.read().splitlines()

  pool_size=6 #mp.cpu_count()
  pool=mp.Pool(processes=pool_size)
  pool_outputs= pool.map(Bash_cmd, Pops)
  pool.close()
  pool.join()
